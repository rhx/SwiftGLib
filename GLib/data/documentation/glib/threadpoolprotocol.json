{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ThreadPoolProtocol"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/GLib\/documentation\/GLib\/PointerWrapper","preciseIdentifier":"s:4GLib14PointerWrapperP","text":"PointerWrapper"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A thread pool is useful when you wish to asynchronously fork out the execution of work"},{"type":"text","text":" "},{"type":"text","text":"and continue working in your own thread. If that will happen often, the overhead of starting"},{"type":"text","text":" "},{"type":"text","text":"and destroying a thread each time might be too high. In such cases reusing already started"},{"type":"text","text":" "},{"type":"text","text":"threads seems like a good idea. And it indeed is, but implementing this can be tedious"},{"type":"text","text":" "},{"type":"text","text":"and error-prone."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Therefore GLib provides thread pools for your convenience. An added advantage is, that the"},{"type":"text","text":" "},{"type":"text","text":"threads can be shared between the different subsystems of your program, when they are using GLib."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To create a new thread pool, you use [func"},{"type":"codeVoice","code":"GLib.ThreadPool.new"},{"type":"text","text":"]."},{"type":"text","text":" "},{"type":"text","text":"It is destroyed by [method"},{"type":"codeVoice","code":"GLib.ThreadPool.free"},{"type":"text","text":"]."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to execute a certain task within a thread pool, use [method"},{"type":"codeVoice","code":"GLib.ThreadPool.push"},{"type":"text","text":"]."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To get the current number of running threads you call [method"},{"type":"codeVoice","code":"GLib.ThreadPool.get_num_threads"},{"type":"text","text":"]."},{"type":"text","text":" "},{"type":"text","text":"To get the number of still unprocessed tasks you call [method"},{"type":"codeVoice","code":"GLib.ThreadPool.unprocessed"},{"type":"text","text":"]."},{"type":"text","text":" "},{"type":"text","text":"To control the maximum number of threads for a thread pool, you use"},{"type":"text","text":" "},{"type":"text","text":"[method"},{"type":"codeVoice","code":"GLib.ThreadPool.get_max_threads"},{"type":"text","text":"]. and [method"},{"type":"codeVoice","code":"GLib.ThreadPool.set_max_threads"},{"type":"text","text":"]."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Finally you can control the number of unused threads, that are kept alive by GLib for future use."},{"type":"text","text":" "},{"type":"text","text":"The current number can be fetched with [func"},{"type":"codeVoice","code":"GLib.ThreadPool.get_num_unused_threads"},{"type":"text","text":"]."},{"type":"text","text":" "},{"type":"text","text":"The maximum number can be controlled by [func"},{"type":"codeVoice","code":"GLib.ThreadPool.get_max_unused_threads"},{"type":"text","text":"] and"},{"type":"text","text":" "},{"type":"text","text":"[func"},{"type":"codeVoice","code":"GLib.ThreadPool.set_max_unused_threads"},{"type":"text","text":"]. All currently unused threads"},{"type":"text","text":" "},{"type":"text","text":"can be stopped by calling [func"},{"type":"codeVoice","code":"GLib.ThreadPool.stop_unused_threads"},{"type":"text","text":"]."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol"},{"type":"text","text":" protocol exposes the methods and properties of an underlying "},{"type":"codeVoice","code":"GThreadPool"},{"type":"text","text":" instance."},{"type":"text","text":" "},{"type":"text","text":"The default implementation of these can be found in the protocol extension below."},{"type":"text","text":" "},{"type":"text","text":"For a concrete class that implements these methods and properties, see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPool"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Alternatively, use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolRef"},{"type":"text","text":" as a lighweight, "},{"type":"codeVoice","code":"unowned"},{"type":"text","text":" reference if you already have an instance you just want to use."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/glib\/threadpoolprotocol"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/GLib\/documentation\/GLib\/PointerWrapper"],"kind":"relationships","title":"Inherits From","type":"inheritsFrom"},{"identifiers":["doc:\/\/GLib\/documentation\/GLib\/ThreadPool","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolRef"],"kind":"relationships","title":"Conforming Types","type":"conformingTypes"}],"identifier":{"url":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GThreadPool"},{"type":"text","text":" struct represents a thread pool."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ThreadPoolProtocol"}],"title":"ThreadPoolProtocol","roleHeading":"Protocol","role":"symbol","symbolKind":"protocol","externalID":"s:4GLib18ThreadPoolProtocolP","modules":[{"name":"GLib"}],"navigatorTitle":[{"kind":"identifier","text":"ThreadPoolProtocol"}]},"hierarchy":{"paths":[["doc:\/\/GLib\/documentation\/GLib"]]},"topicSections":[{"title":"Instance Properties","identifiers":["doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/exclusive","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/func","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/maxThreads","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/numThreads","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/userData"]},{"title":"Instance Methods","identifiers":["doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/free(immediate:wait:)","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/getMaxThreads()","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/getNumThreads()","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/moveToFront(data:)","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/push(data:)","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/set(maxThreads:)","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/setSortFunction(func:userData:)","doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/unprocessed()"]}],"references":{"doc://GLib/documentation/GLib/ThreadPoolProtocol/userData":{"role":"symbol","title":"userData","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"userData"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gpointer","preciseIdentifier":"c:@T@gpointer"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"the user data for the threads of this pool"}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/userData","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/userdata"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/moveToFront(data:)":{"role":"symbol","title":"moveToFront(data:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"moveToFront"},{"kind":"text","text":"("},{"kind":"externalParam","text":"data"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gpointer","preciseIdentifier":"c:@T@gpointer"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Moves the item to the front of the queue of unprocessed"},{"type":"text","text":" "},{"type":"text","text":"items, so that it will be processed next."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/moveToFront(data:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/movetofront(data:)"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/exclusive":{"role":"symbol","title":"exclusive","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"exclusive"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gboolean","preciseIdentifier":"c:@T@gboolean"}],"abstract":[{"type":"text","text":"are all threads exclusive to this pool"}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/exclusive","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/exclusive"},"doc://GLib/documentation/GLib":{"role":"collection","title":"GLib","abstract":[],"identifier":"doc:\/\/GLib\/documentation\/GLib","kind":"symbol","type":"topic","url":"\/documentation\/glib"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/getNumThreads()":{"role":"symbol","title":"getNumThreads()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getNumThreads"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Returns the number of threads currently running in "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/getNumThreads()","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/getnumthreads()"},"doc://GLib/documentation/GLib/PointerWrapper":{"role":"symbol","title":"PointerWrapper","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"PointerWrapper"}],"abstract":[{"type":"text","text":"Protocol for GLib types that wrap pointers."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/PointerWrapper","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PointerWrapper"}],"url":"\/documentation\/glib\/pointerwrapper"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/free(immediate:wait:)":{"role":"symbol","title":"free(immediate:wait:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"free"},{"kind":"text","text":"("},{"kind":"externalParam","text":"immediate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"wait"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Frees all resources allocated for "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/free(immediate:wait:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/free(immediate:wait:)"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/setSortFunction(func:userData:)":{"role":"symbol","title":"setSortFunction(func:userData:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"setSortFunction"},{"kind":"text","text":"("},{"kind":"externalParam","text":"func"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GCompareDataFunc","preciseIdentifier":"c:@T@GCompareDataFunc"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"userData"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gpointer","preciseIdentifier":"c:@T@gpointer"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"Sets the function used to sort the list of tasks. This allows the"},{"type":"text","text":" "},{"type":"text","text":"tasks to be processed by a priority determined by "},{"type":"codeVoice","code":"func"},{"type":"text","text":", and not"},{"type":"text","text":" "},{"type":"text","text":"just in the order in which they were added to the pool."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/setSortFunction(func:userData:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/setsortfunction(func:userdata:)"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/maxThreads":{"role":"symbol","title":"maxThreads","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"maxThreads"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Returns the maximal number of threads for "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/maxThreads","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/maxthreads"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/unprocessed()":{"role":"symbol","title":"unprocessed()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"unprocessed"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Returns the number of tasks still unprocessed in "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/unprocessed()","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/unprocessed()"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/func":{"role":"symbol","title":"func","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"`func`"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GFunc","preciseIdentifier":"c:@T@GFunc"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"the function to execute in the threads of this pool"}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/func","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/func"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/push(data:)":{"role":"symbol","title":"push(data:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"push"},{"kind":"text","text":"("},{"kind":"externalParam","text":"data"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gpointer","preciseIdentifier":"c:@T@gpointer"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Inserts "},{"type":"codeVoice","code":"data"},{"type":"text","text":" into the list of tasks to be executed by "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/push(data:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/push(data:)"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/getMaxThreads()":{"role":"symbol","title":"getMaxThreads()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getMaxThreads"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Returns the maximal number of threads for "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/getMaxThreads()","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/getmaxthreads()"},"doc://GLib/documentation/GLib/ThreadPoolProtocol":{"role":"symbol","title":"ThreadPoolProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ThreadPoolProtocol"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GThreadPool"},{"type":"text","text":" struct represents a thread pool."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ThreadPoolProtocol"}],"url":"\/documentation\/glib\/threadpoolprotocol"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/set(maxThreads:)":{"role":"symbol","title":"set(maxThreads:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"set"},{"kind":"text","text":"("},{"kind":"externalParam","text":"maxThreads"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Sets the maximal allowed number of threads for "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"A value of -1 means that the maximal number of threads"},{"type":"text","text":" "},{"type":"text","text":"is unlimited. If "},{"type":"codeVoice","code":"pool"},{"type":"text","text":" is an exclusive thread pool, setting"},{"type":"text","text":" "},{"type":"text","text":"the maximal number of threads to -1 is not allowed."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/set(maxThreads:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/set(maxthreads:)"},"doc://GLib/documentation/GLib/ThreadPool":{"role":"symbol","title":"ThreadPool","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ThreadPool"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GThreadPool"},{"type":"text","text":" struct represents a thread pool."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPool","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ThreadPool"}],"url":"\/documentation\/glib\/threadpool"},"doc://GLib/documentation/GLib/ThreadPoolRef":{"role":"symbol","title":"ThreadPoolRef","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ThreadPoolRef"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GThreadPool"},{"type":"text","text":" struct represents a thread pool."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolRef","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ThreadPoolRef"}],"url":"\/documentation\/glib\/threadpoolref"},"doc://GLib/documentation/GLib/ThreadPoolProtocol/numThreads":{"role":"symbol","title":"numThreads","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"numThreads"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Returns the number of threads currently running in "},{"type":"codeVoice","code":"pool"},{"type":"text","text":"."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/ThreadPoolProtocol\/numThreads","kind":"symbol","type":"topic","url":"\/documentation\/glib\/threadpoolprotocol\/numthreads"}}}