{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testExpectMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"logDomain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">? = nil, "},{"kind":"externalParam","text":"logLevel"},{"kind":"text","text":": "},{"kind":"typeIdentifier","identifier":"doc:\/\/GLib\/documentation\/GLib\/LogLevelFlags","preciseIdentifier":"s:4GLib13LogLevelFlagsV","text":"LogLevelFlags"},{"kind":"text","text":", "},{"kind":"externalParam","text":"pattern"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">!)"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When this message is logged, it will not be printed, and the test case will"},{"type":"text","text":" "},{"type":"text","text":"not abort."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This API may only be used with the old logging API ([func"},{"type":"codeVoice","code":"GLib.log"},{"type":"text","text":"] without"},{"type":"text","text":" "},{"type":"codeVoice","code":"G_LOG_USE_STRUCTURED"},{"type":"text","text":" defined). It will not work with the structured logging"},{"type":"text","text":" "},{"type":"text","text":"API. See "},{"type":"reference","isActive":true,"identifier":"logging.html#testing-for-messages"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use [func"},{"type":"codeVoice","code":"GLib.test_assert_expected_messages"},{"type":"text","text":"] to assert that all"},{"type":"text","text":" "},{"type":"text","text":"previously-expected messages have been seen and suppressed."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can call this multiple times in a row, if multiple messages are"},{"type":"text","text":" "},{"type":"text","text":"expected as a result of a single call. (The messages must appear in"},{"type":"text","text":" "},{"type":"text","text":"the same order as the calls to [func"},{"type":"codeVoice","code":"GLib.test_expect_message"},{"type":"text","text":"].)"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example:"}]},{"type":"codeListing","syntax":"c","code":["\/\/ `g_main_context_push_thread_default()` should fail if the","\/\/ context is already owned by another thread.","g_test_expect_message (G_LOG_DOMAIN,","                       G_LOG_LEVEL_CRITICAL,","                       \"assertion*acquired_context*failed\");","g_main_context_push_thread_default (bad_context);","g_test_assert_expected_messages ();"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that you cannot use this to test [func"},{"type":"codeVoice","code":"GLib.error"},{"type":"text","text":"] messages, since"},{"type":"text","text":" "},{"type":"text","text":"[func"},{"type":"codeVoice","code":"GLib.error"},{"type":"text","text":"] intentionally never returns even if the program doesnâ€™t"},{"type":"text","text":" "},{"type":"text","text":"abort; use [func"},{"type":"codeVoice","code":"GLib.test_trap_subprocess"},{"type":"text","text":"] in this case."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If messages at [flags"},{"type":"codeVoice","code":"GLib.LogLevelFlags.LEVEL_DEBUG"},{"type":"text","text":"] are emitted, but not explicitly"},{"type":"text","text":" "},{"type":"text","text":"expected via [func"},{"type":"codeVoice","code":"GLib.test_expect_message"},{"type":"text","text":"] then they will be ignored."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/glib\/testexpectmessage(logdomain:loglevel:pattern:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GLib\/documentation\/GLib\/testExpectMessage(logDomain:logLevel:pattern:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Indicates that a message with the given "},{"type":"codeVoice","code":"logDomain"},{"type":"text","text":" and "},{"type":"codeVoice","code":"logLevel"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"with text matching "},{"type":"codeVoice","code":"pattern"},{"type":"text","text":", is expected to be logged."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testExpectMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"logDomain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">?, "},{"kind":"externalParam","text":"logLevel"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"LogLevelFlags","preciseIdentifier":"s:4GLib13LogLevelFlagsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"pattern"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">!)"}],"title":"testExpectMessage(logDomain:logLevel:pattern:)","roleHeading":"Function","role":"symbol","symbolKind":"func","externalID":"s:4GLib17testExpectMessage9logDomain0E5Level7patternySPys4Int8VGSg_AA03LogG5FlagsVAItF","modules":[{"name":"GLib"}]},"hierarchy":{"paths":[["doc:\/\/GLib\/documentation\/GLib"]]},"references":{"logging.html#testing-for-messages":{"title":"Testing for Messages","titleInlineContent":[{"type":"text","text":"Testing for Messages"}],"type":"link","identifier":"logging.html#testing-for-messages","url":"logging.html#testing-for-messages"},"doc://GLib/documentation/GLib/testExpectMessage(logDomain:logLevel:pattern:)":{"role":"symbol","title":"testExpectMessage(logDomain:logLevel:pattern:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testExpectMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"logDomain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">?, "},{"kind":"externalParam","text":"logLevel"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"LogLevelFlags","preciseIdentifier":"s:4GLib13LogLevelFlagsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"pattern"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:@T@gchar"},{"kind":"text","text":">!)"}],"abstract":[{"type":"text","text":"Indicates that a message with the given "},{"type":"codeVoice","code":"logDomain"},{"type":"text","text":" and "},{"type":"codeVoice","code":"logLevel"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"with text matching "},{"type":"codeVoice","code":"pattern"},{"type":"text","text":", is expected to be logged."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/testExpectMessage(logDomain:logLevel:pattern:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/testexpectmessage(logdomain:loglevel:pattern:)"},"doc://GLib/documentation/GLib/LogLevelFlags":{"role":"symbol","title":"LogLevelFlags","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LogLevelFlags"}],"abstract":[{"type":"text","text":"Flags specifying the level of log messages."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/LogLevelFlags","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LogLevelFlags"}],"url":"\/documentation\/glib\/loglevelflags"},"doc://GLib/documentation/GLib":{"role":"collection","title":"GLib","abstract":[],"identifier":"doc:\/\/GLib\/documentation\/GLib","kind":"symbol","type":"topic","url":"\/documentation\/glib"}}}