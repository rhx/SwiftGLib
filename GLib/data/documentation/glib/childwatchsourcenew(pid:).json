{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"childWatchSourceNew"},{"kind":"text","text":"("},{"kind":"externalParam","text":"pid"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GPid","preciseIdentifier":"c:@T@GPid"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/GLib\/documentation\/GLib\/SourceRef","preciseIdentifier":"s:4GLib9SourceRefV","text":"SourceRef"},{"kind":"text","text":"!"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The source will not initially be associated with any"},{"type":"text","text":" "},{"type":"text","text":"[struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/MainContext"},{"type":"text","text":"] and must be added to one with"},{"type":"text","text":" "},{"type":"text","text":"[method"},{"type":"codeVoice","code":"GLib.Source.attach"},{"type":"text","text":"] before it will be executed."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that child watch sources can only be used in conjunction with"},{"type":"text","text":" "},{"type":"codeVoice","code":"g_spawn..."},{"type":"text","text":" when the "},{"type":"codeVoice","code":"doNotReapChild"},{"type":"text","text":" flag is used."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that on platforms where "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/Pid"},{"type":"text","text":" must be explicitly closed"},{"type":"text","text":" "},{"type":"text","text":"(see [func"},{"type":"codeVoice","code":"GLib.spawn_close_pid"},{"type":"text","text":"]) "},{"type":"codeVoice","code":"pid"},{"type":"text","text":" must not be closed while the"},{"type":"text","text":" "},{"type":"text","text":"source is still active. Typically, you will want to call"},{"type":"text","text":" "},{"type":"text","text":"[func"},{"type":"codeVoice","code":"GLib.spawn_close_pid"},{"type":"text","text":"] in the callback function for the source."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"On POSIX platforms, the following restrictions apply to this API"},{"type":"text","text":" "},{"type":"text","text":"due to limitations in POSIX process interfaces:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"pid"},{"type":"text","text":" must be a child of this process"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"pid"},{"type":"text","text":" must be positive"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the application must not call "},{"type":"codeVoice","code":"waitpid"},{"type":"text","text":" with a non-positive"},{"type":"text","text":" "},{"type":"text","text":"first argument, for instance in another thread"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the application must not wait for "},{"type":"codeVoice","code":"pid"},{"type":"text","text":" to exit by any other"},{"type":"text","text":" "},{"type":"text","text":"mechanism, including "},{"type":"codeVoice","code":"waitpid(pid, ...)"},{"type":"text","text":" or a second child-watch"},{"type":"text","text":" "},{"type":"text","text":"source for the same "},{"type":"codeVoice","code":"pid"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the application must not ignore "},{"type":"codeVoice","code":"SIGCHLD"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Before 2.78, the application could not send a signal ("},{"type":"codeVoice","code":"kill()"},{"type":"text","text":") to the"},{"type":"text","text":" "},{"type":"text","text":"watched "},{"type":"codeVoice","code":"pid"},{"type":"text","text":" in a race free manner. Since 2.78, you can do that while the"},{"type":"text","text":" "},{"type":"text","text":"associated [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/MainContext"},{"type":"text","text":"] is acquired."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Before 2.78, even after destroying the [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/Source"},{"type":"text","text":"], you could not"},{"type":"text","text":" "},{"type":"text","text":"be sure that "},{"type":"codeVoice","code":"pid"},{"type":"text","text":" wasnâ€™t already reaped. Hence, it was also not"},{"type":"text","text":" "},{"type":"text","text":"safe to "},{"type":"codeVoice","code":"kill()"},{"type":"text","text":" or "},{"type":"codeVoice","code":"waitpid()"},{"type":"text","text":" on the process ID after the child watch"},{"type":"text","text":" "},{"type":"text","text":"source was gone. Destroying the source before it fired made it"},{"type":"text","text":" "},{"type":"text","text":"impossible to reliably reap the process."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If any of those conditions are not met, this and related APIs will"},{"type":"text","text":" "},{"type":"text","text":"not work correctly. This can often be diagnosed via a GLib warning"},{"type":"text","text":" "},{"type":"text","text":"stating that "},{"type":"codeVoice","code":"ECHILD"},{"type":"text","text":" was received by "},{"type":"codeVoice","code":"waitpid"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Calling "},{"type":"codeVoice","code":"waitpid"},{"type":"text","text":" for specific processes other than "},{"type":"codeVoice","code":"pid"},{"type":"text","text":" remains a"},{"type":"text","text":" "},{"type":"text","text":"valid thing to do."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/glib\/childwatchsourcenew(pid:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GLib\/documentation\/GLib\/childWatchSourceNew(pid:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Creates a new child_watch source."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"childWatchSourceNew"},{"kind":"text","text":"("},{"kind":"externalParam","text":"pid"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GPid","preciseIdentifier":"c:@T@GPid"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"SourceRef","preciseIdentifier":"s:4GLib9SourceRefV"},{"kind":"text","text":"!"}],"title":"childWatchSourceNew(pid:)","roleHeading":"Function","role":"symbol","symbolKind":"func","externalID":"s:4GLib19childWatchSourceNew3pidAA0D3RefVSgs5Int32V_tF","modules":[{"name":"GLib"}]},"hierarchy":{"paths":[["doc:\/\/GLib\/documentation\/GLib"]]},"references":{"doc://GLib/documentation/GLib/childWatchSourceNew(pid:)":{"role":"symbol","title":"childWatchSourceNew(pid:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"childWatchSourceNew"},{"kind":"text","text":"("},{"kind":"externalParam","text":"pid"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GPid","preciseIdentifier":"c:@T@GPid"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"SourceRef","preciseIdentifier":"s:4GLib9SourceRefV"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Creates a new child_watch source."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/childWatchSourceNew(pid:)","kind":"symbol","type":"topic","url":"\/documentation\/glib\/childwatchsourcenew(pid:)"},"doc://GLib/documentation/GLib":{"role":"collection","title":"GLib","abstract":[],"identifier":"doc:\/\/GLib\/documentation\/GLib","kind":"symbol","type":"topic","url":"\/documentation\/glib"},"doc://GLib/documentation/GLib/SourceRef":{"role":"symbol","title":"SourceRef","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SourceRef"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GSource"},{"type":"text","text":" struct is an opaque data type"},{"type":"text","text":" "},{"type":"text","text":"representing an event source."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/SourceRef","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SourceRef"}],"url":"\/documentation\/glib\/sourceref"},"doc://GLib/documentation/GLib/Pid":{"role":"symbol","title":"Pid","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"Pid"}],"abstract":[{"type":"text","text":"A type which is used to hold a process identification."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/Pid","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Pid"}],"url":"\/documentation\/glib\/pid"},"doc://GLib/documentation/GLib/Source":{"role":"symbol","title":"Source","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Source"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GSource"},{"type":"text","text":" struct is an opaque data type"},{"type":"text","text":" "},{"type":"text","text":"representing an event source."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/Source","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Source"}],"url":"\/documentation\/glib\/source"},"doc://GLib/documentation/GLib/MainContext":{"role":"symbol","title":"MainContext","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MainContext"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"GMainContext"},{"type":"text","text":" struct is an opaque data"},{"type":"text","text":" "},{"type":"text","text":"type representing a set of sources to be handled in a main loop."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/MainContext","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MainContext"}],"url":"\/documentation\/glib\/maincontext"}}}