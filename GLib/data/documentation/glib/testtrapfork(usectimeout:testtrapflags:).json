{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testTrapFork"},{"kind":"text","text":"("},{"kind":"externalParam","text":"usecTimeout"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"guint64","preciseIdentifier":"c:@T@guint64"},{"kind":"text","text":", "},{"kind":"externalParam","text":"testTrapFlags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","identifier":"doc:\/\/GLib\/documentation\/GLib\/TestTrapFlags","preciseIdentifier":"s:4GLib13TestTrapFlagsV","text":"TestTrapFlags"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If "},{"type":"codeVoice","code":"usecTimeout"},{"type":"text","text":" is non-0, the forked test case is aborted and"},{"type":"text","text":" "},{"type":"text","text":"considered failing if its run time exceeds it."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The forking behavior can be configured with the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GLib\/documentation\/GLib\/TestTrapFlags"},{"type":"text","text":" flags."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the following example, the test code forks, the forked child"},{"type":"text","text":" "},{"type":"text","text":"process produces some sample output and exits successfully."},{"type":"text","text":" "},{"type":"text","text":"The forking parent process then asserts successful child program"},{"type":"text","text":" "},{"type":"text","text":"termination and validates child program outputs."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"(C Language Example):"}]},{"type":"codeListing","syntax":"C","code":["  static void","  test_fork_patterns (void)","  {","    if (g_test_trap_fork (0, G_TEST_TRAP_SILENCE_STDOUT | G_TEST_TRAP_SILENCE_STDERR))","      {","        g_print (\"some stdout text: somagic17\\n\");","        g_printerr (\"some stderr text: semagic43\\n\");","        exit (0); \/\/ successful test run","      }","    g_test_trap_assert_passed ();","    g_test_trap_assert_stdout (\"*somagic17*\");","    g_test_trap_assert_stderr (\"*semagic43*\");","  }"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"test_trap_fork is deprecated:"}]},{"type":"text","text":" "},{"type":"text","text":"This function is implemented only on Unix platforms,"},{"type":"text","text":" "},{"type":"text","text":"is not always reliable due to problems inherent in fork-without-exec"},{"type":"text","text":" "},{"type":"text","text":"and doesnâ€™t set close-on-exec flag on its file descriptors."},{"type":"text","text":" "},{"type":"text","text":"Use g_test_trap_subprocess() instead."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/glib\/testtrapfork(usectimeout:testtrapflags:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GLib\/documentation\/GLib\/testTrapFork(usecTimeout:testTrapFlags:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Fork the current test program to execute a test case that might"},{"type":"text","text":" "},{"type":"text","text":"not return or that might abort."}],"kind":"symbol","metadata":{"role":"symbol","title":"testTrapFork(usecTimeout:testTrapFlags:)","roleHeading":"Function","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testTrapFork"},{"kind":"text","text":"("},{"kind":"externalParam","text":"usecTimeout"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"guint64","preciseIdentifier":"c:@T@guint64"},{"kind":"text","text":", "},{"kind":"externalParam","text":"testTrapFlags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TestTrapFlags","preciseIdentifier":"s:4GLib13TestTrapFlagsV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"symbolKind":"func","externalID":"s:4GLib12testTrapFork11usecTimeout0bC5FlagsSbs6UInt64V_AA04TestcG0VtF","modules":[{"name":"GLib"}],"platforms":[]},"hierarchy":{"paths":[["doc:\/\/GLib\/documentation\/GLib"]]},"references":{"doc://GLib/documentation/GLib/TestTrapFlags":{"role":"symbol","title":"TestTrapFlags","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TestTrapFlags"}],"abstract":[{"type":"text","text":"Test traps are guards around forked tests."},{"type":"text","text":" "},{"type":"text","text":"These flags determine what traps to set."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/TestTrapFlags","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TestTrapFlags"}],"url":"\/documentation\/glib\/testtrapflags"},"doc://GLib/documentation/GLib/testTrapFork(usecTimeout:testTrapFlags:)":{"role":"symbol","title":"testTrapFork(usecTimeout:testTrapFlags:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"testTrapFork"},{"kind":"text","text":"("},{"kind":"externalParam","text":"usecTimeout"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"guint64","preciseIdentifier":"c:@T@guint64"},{"kind":"text","text":", "},{"kind":"externalParam","text":"testTrapFlags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TestTrapFlags","preciseIdentifier":"s:4GLib13TestTrapFlagsV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Fork the current test program to execute a test case that might"},{"type":"text","text":" "},{"type":"text","text":"not return or that might abort."}],"identifier":"doc:\/\/GLib\/documentation\/GLib\/testTrapFork(usecTimeout:testTrapFlags:)","kind":"symbol","type":"topic","deprecated":true,"url":"\/documentation\/glib\/testtrapfork(usectimeout:testtrapflags:)"},"doc://GLib/documentation/GLib":{"role":"collection","title":"GLib","abstract":[],"identifier":"doc:\/\/GLib\/documentation\/GLib","kind":"symbol","type":"topic","url":"\/documentation\/glib"}}}